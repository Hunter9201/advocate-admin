<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uganda Legal Documents</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,sans-serif}
        body{background:#f7fafc;color:#1a365d;max-width:1200px;margin:0 auto;padding:20px}
        header{background:#1a365d;color:white;padding:20px;border-radius:8px;margin-bottom:30px}
        h1{margin-bottom:5px}
        .search{background:white;padding:20px;border-radius:8px;margin-bottom:30px;border:1px solid #e2e8f0}
        .search input{width:100%;padding:12px;border:2px solid #e2e8f0;border-radius:6px;font-size:16px}
        .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:25px}
        .stat-item{text-align:center;padding:15px;background:white;border-radius:8px;border:1px solid #e2e8f0}
        .pdf-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:18px}
        .pdf-card{background:white;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.08);border:1px solid #e2e8f0}
        .pdf-card-header{background:#1a365d;color:white;padding:15px}
        .pdf-card-body{padding:15px}
        .pdf-title{font-size:1.1rem;margin-bottom:6px;font-weight:600}
        .pdf-description{color:#4a5568;margin-bottom:15px;font-size:0.9rem}
        .pdf-button{width:100%;padding:14px;background:#1a365d;color:white;border:none;cursor:pointer;font-weight:600}
        .pdf-button:hover{background:#2a4365}
        .loading{text-align:center;padding:40px;color:#1a365d}
        @media (max-width:768px){.pdf-grid{grid-template-columns:repeat(2,1fr)}}
        @media (max-width:480px){.pdf-grid{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <header>
        <h1>Uganda Legal Documents</h1>
        <p>Complete collection of Ugandan laws and legal procedures</p>
    </header>

    <div class="search">
        <input type="text" id="searchInput" placeholder="Search documents...">
    </div>

    <div class="stats">
        <div class="stat-item">
            <div style="font-size:1.5rem;font-weight:700" id="totalDocuments">0</div>
            <div>Total Documents</div>
        </div>
    </div>

    <div class="pdf-grid" id="pdfGrid">
        <div class="loading">Loading documents...</div>
    </div>

    <script>
        async function loadDocuments() {
            try {
                document.getElementById('pdfGrid').innerHTML = '<div class="loading">Loading documents...</div>';
                
                const response = await fetch('documents.json');
                if (!response.ok) throw new Error('Failed to load documents.json');
                
                const documents = await response.json();
                
                // Update stats
                document.getElementById('totalDocuments').textContent = documents.length;
                
                // Display documents
                const grid = document.getElementById('pdfGrid');
                grid.innerHTML = '';
                
                if (documents.length === 0) {
                    grid.innerHTML = '<div class="loading">No documents found. Upload documents using the admin panel.</div>';
                    return;
                }
                
                documents.forEach(doc => {
                    const card = document.createElement('div');
                    card.className = 'pdf-card';
                    card.innerHTML = `
                        <div class="pdf-card-header">
                            <div style="font-size:0.8rem;background:rgba(255,255,255,0.15);display:inline-block;padding:3px 10px;border-radius:20px;margin-bottom:8px">
                                ${doc.category || 'Document'}
                            </div>
                            <div class="pdf-title">${doc.title || 'Untitled'}</div>
                            <div style="font-size:0.8rem;opacity:0.9">Year: ${doc.year || 'N/A'}</div>
                        </div>
                        <div class="pdf-card-body">
                            <p class="pdf-description">${doc.description || 'No description available'}</p>
                            <div style="font-size:0.8rem;color:#718096;margin-bottom:15px">
                                <div>Size: ${doc.size || 'Unknown'} • Pages: ${doc.pages || '?'}</div>
                            </div>
                            <button class="pdf-button" onclick="openPDF('${doc.filename}')">
                                Open PDF
                            </button>
                        </div>
                    `;
                    grid.appendChild(card);
                });
                
                // Setup search
                const searchInput = document.getElementById('searchInput');
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const cards = document.querySelectorAll('.pdf-card');
                    
                    cards.forEach(card => {
                        const title = card.querySelector('.pdf-title').textContent.toLowerCase();
                        const description = card.querySelector('.pdf-description').textContent.toLowerCase();
                        const category = card.querySelector('.pdf-card-header div:first-child').textContent.toLowerCase();
                        
                        if (title.includes(searchTerm) || description.includes(searchTerm) || category.includes(searchTerm)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('pdfGrid').innerHTML = `
                    <div class="loading">
                        <div style="color:#c53030;margin-bottom:10px">⚠️ Error loading documents</div>
                        <div style="font-size:0.9rem;color:#718096">${error.message}</div>
                        <button onclick="loadDocuments()" style="margin-top:15px;padding:10px 20px;background:#1a365d;color:white;border:none;border-radius:6px;cursor:pointer">
                            Try Again
                        </button>
                    </div>
                `;
            }
        }

        function openPDF(filename) {
            // Use the filename directly (PDF should be in same directory)
            window.open(filename, '_blank');
        }

        // Load on page load
        document.addEventListener('DOMContentLoaded', loadDocuments);
    </script>
</body>
</html>
